#!/usr/bin/env bash
# Beginner-friendly Apache log analyzer

awk '
{
    # Count each IP and status code combination
    count[$1,$9]++
}
END {
    # Print header
    print "OCCURENCE_NUMBER IP HTTP_CODE"
    
    # Print all counts with IP and status
    for (combo in count) {
        split(combo, parts, SUBSEP)
        print count[combo], parts[1], parts[2]
    }
}
' "$1" | sort -nr -k1
