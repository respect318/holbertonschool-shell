#!/usr/bin/env bash
# Simplified Apache log analyzer - groups by IP and HTTP status

awk '
{
    # Count each IP+status combination
    count[$1 " " $9]++
} 
END {
    # Print header
    print "OCCURENCE_NUMBER IP HTTP_CODE"
    
    # First print all counts with their IP+status
    for (combo in count) {
        print count[combo] " " combo
    }
}
' "$1" | sort -nr
